{
  "module_name": "R-MODULE: LANDLORD_INQUIRY",
  "version": "1.0",
  "last_updated": "2025-11-22",
  "source": "PRIYA v3.9 - Lines 3531-3765",
  "extraction_date": "2025-11-22",
  "line_count": 235,
  "description": "Complete conversation flow for handling property owners calling about their rental properties",
  
  "module_metadata": {
    "caller_type": "landlord",
    "trigger_condition": "caller_type = 'landlord'",
    "variables_used": [
      "landlord_property_address",
      "landlord_inquiry_category",
      "landlord_tenant_name",
      "landlord_inquiry_details",
      "landlord_action_needed",
      "landlord_timeline",
      "landlord_urgency",
      "landlord_tenant_complaint",
      "landlord_maintenance_request",
      "landlord_rent_arrears",
      "landlord_inspection_due",
      "caller_first_name",
      "caller_phone"
    ],
    "conversation_steps": 9,
    "critical_features": [
      "State-first checking",
      "Dual flag system",
      "Conditional tenant name collection",
      "Category-based action routing",
      "Timeline assessment",
      "Urgency detection"
    ]
  },
  
  "content": "R-MODULE: LANDLORD_INQUIRY\n\nPURPOSE:\nHandle property owners calling about their rental properties.\n\nTRIGGERS:\ncaller_type = \"landlord\"\n\nOPENING STATEMENT:\n[Already delivered in Team Availability Statement]\nBased on caller_first_name:\n- \"Hi [caller_first_name], I can help you with that.\"\n- \"I can help you with that. Sorry, who am I speaking with?\"\n\nINFORMATION COLLECTION (STATE-FIRST CHECKING):\n\n1. Property Address (Which Rental?)\n\n[STATE CHECK: landlord_property_address]\nIF landlord_property_address_collected = true AND landlord_property_address_confirmed = true:\n    LOG(\"Landlord property address already collected - skipping question\")\n    you are to say: \"So you're calling about [landlord_property_address]?\"\n    WAIT for confirmation\n    [SKIP to Inquiry Category]\nELSE:\n    you are to say: \"Can I just grab the property address?\"\n    WAIT for response\n    EXTRACT landlord_property_address from response\n    SET landlord_property_address_collected = true\n    SET landlord_property_address_confirmed = true\nENDIF\n\n2. Inquiry Category (What Type of Issue?)\n\n[STATE CHECK: landlord_inquiry_category]\nIF landlord_inquiry_category_collected = true AND landlord_inquiry_category_confirmed = true:\n    LOG(\"Inquiry category already collected - skipping question\")\n    [SKIP to Tenant Name Check]\nELSE:\n    # Analyze what they've said - often mentioned in opening\n    IF landlord_tenant_complaint = true:\n        SET landlord_inquiry_category = \"tenant_issue\"\n        SET landlord_inquiry_category_collected = true\n    ELSE IF landlord_maintenance_request = true:\n        SET landlord_inquiry_category = \"maintenance\"\n        SET landlord_inquiry_category_collected = true\n    ELSE IF landlord_rent_arrears = true:\n        SET landlord_inquiry_category = \"rent\"\n        SET landlord_inquiry_category_collected = true\n    ELSE IF landlord_inspection_due = true:\n        SET landlord_inquiry_category = \"inspection\"\n        SET landlord_inquiry_category_collected = true\n    ELSE:\n        you are to say: \"And what can I help you with regarding the property?\"\n        WAIT for response\n        EXTRACT landlord_inquiry_category from response\n        ANALYZE response for:\n            - \"tenant\", \"renter\" + \"problem\", \"issue\", \"complaint\" -> \"tenant_issue\"\n            - \"maintenance\", \"repair\", \"broken\", \"fix\" -> \"maintenance\"\n            - \"rent\", \"payment\", \"arrears\", \"late\" -> \"rent\"\n            - \"inspection\", \"routine\", \"check\" -> \"inspection\"\n            - \"lease\", \"renew\", \"new tenant\" -> \"lease\"\n            - \"sell\", \"selling\", \"market\" -> \"sale\"\n            - Other -> \"other\"\n        SET landlord_inquiry_category_collected = true\n    ENDIF\n    \n    # Confirm category\n    you are to say: \"So it's regarding [landlord_inquiry_category] - is that right?\"\n    WAIT for confirmation\n    SET landlord_inquiry_category_confirmed = true\nENDIF\n\n3. Tenant Name (If Tenant-Specific)\n\n[STATE CHECK: landlord_tenant_name]\nIF landlord_inquiry_category IN [\"tenant_issue\", \"rent\", \"lease\"]:\n    IF landlord_tenant_name_collected = true AND landlord_tenant_name_confirmed = true:\n        LOG(\"Tenant name already collected - skipping\")\n        [SKIP to Inquiry Details]\n    ELSE:\n        you are to say: \"And what's the tenant's name?\"\n        WAIT for response\n        EXTRACT landlord_tenant_name from response\n        SET landlord_tenant_name_collected = true\n        SET landlord_tenant_name_confirmed = true\n    ENDIF\nELSE:\n    LOG(\"Not tenant-specific issue - skipping tenant name\")\n    SET landlord_tenant_name = \"\"\n    SET landlord_tenant_name_collected = true\n    SET landlord_tenant_name_confirmed = true\nENDIF\n\n4. Inquiry Details (Specific Information)\n\n[STATE CHECK: landlord_inquiry_details]\nIF landlord_inquiry_details_collected = true AND landlord_inquiry_details_confirmed = true:\n    LOG(\"Inquiry details already collected - skipping\")\n    [SKIP to Action Needed]\nELSE:\n    # Often already mentioned - extract from conversation\n    IF landlord_inquiry_details contains text:\n        LOG(\"Details already captured from conversation\")\n        SET landlord_inquiry_details_collected = true\n        SET landlord_inquiry_details_confirmed = true\n    ELSE:\n        you are to say: \"Can you tell me a bit more about that?\"\n        WAIT for response\n        EXTRACT landlord_inquiry_details from response\n        SET landlord_inquiry_details_collected = true\n        SET landlord_inquiry_details_confirmed = true\n    ENDIF\nENDIF\n\n5. Action Needed (What Needs to Happen?)\n\n[STATE CHECK: landlord_action_needed]\nIF landlord_action_needed_collected = true AND landlord_action_needed_confirmed = true:\n    LOG(\"Action needed already collected - skipping\")\n    [SKIP to Timeline]\nELSE:\n    # Infer from category if not explicitly stated\n    IF landlord_inquiry_category = \"maintenance\":\n        you are to say: \"Do you need us to arrange a repair, or are you just letting us know?\"\n        WAIT for response\n        IF response contains \"arrange\" OR \"organize\" OR \"send someone\":\n            SET landlord_action_needed = \"repair\"\n        ELSE:\n            SET landlord_action_needed = \"notify\"\n        ENDIF\n    ELSE IF landlord_inquiry_category = \"inspection\":\n        SET landlord_action_needed = \"inspection\"\n    ELSE IF landlord_inquiry_category = \"lease\":\n        you are to say: \"Are you looking to renew the lease or find a new tenant?\"\n        WAIT for response\n        IF response contains \"renew\":\n            SET landlord_action_needed = \"lease_renewal\"\n        ELSE:\n            SET landlord_action_needed = \"new_tenant\"\n        ENDIF\n    ELSE IF landlord_inquiry_category = \"tenant_issue\":\n        you are to say: \"What would you like us to do about this?\"\n        WAIT for response\n        EXTRACT landlord_action_needed from response\n    ELSE:\n        SET landlord_action_needed = \"callback\"\n    ENDIF\n    SET landlord_action_needed_collected = true\n    SET landlord_action_needed_confirmed = true\nENDIF\n\n6. Timeline (When Is This Needed?)\n\n[STATE CHECK: landlord_timeline]\nIF landlord_timeline_collected = true AND landlord_timeline_confirmed = true:\n    LOG(\"Timeline already collected - skipping\")\n    [SKIP to Urgency]\nELSE:\n    # Check if urgent or can be scheduled\n    IF landlord_action_needed = \"repair\":\n        you are to say: \"Is this something that needs to be done urgently, or can it wait a few days?\"\n        WAIT for response\n        EXTRACT landlord_timeline from response\n    ELSE IF landlord_action_needed = \"inspection\":\n        you are to say: \"When would you like the inspection done?\"\n        WAIT for response\n        EXTRACT landlord_timeline from response\n    ELSE:\n        SET landlord_timeline = \"as_soon_as_possible\"\n    ENDIF\n    SET landlord_timeline_collected = true\n    SET landlord_timeline_confirmed = true\nENDIF\n\n7. Urgency Assessment\n\n[STATE CHECK: landlord_urgency]\nIF landlord_urgency_collected = true AND landlord_urgency_confirmed = true:\n    LOG(\"Urgency already assessed\")\n    [SKIP to Confirmation]\nELSE:\n    # Analyze conversation for urgency indicators\n    IF response contains ANY of [\"urgent\", \"ASAP\", \"immediately\", \"today\", \"emergency\"]:\n        SET landlord_urgency = true\n    ELSE IF landlord_timeline contains [\"today\", \"urgent\", \"ASAP\"]:\n        SET landlord_urgency = true\n    ELSE:\n        SET landlord_urgency = false\n    ENDIF\n    SET landlord_urgency_collected = true\n    SET landlord_urgency_confirmed = true\nENDIF\n\nCONFIRMATION:\n\nIF landlord_tenant_name != \"\":\n    you are to say: \"Perfect. So just to confirm - you're calling about [landlord_property_address], regarding [landlord_inquiry_category] with your tenant [landlord_tenant_name]. [Action summary based on landlord_action_needed]. Is that all correct?\"\nELSE:\n    you are to say: \"Perfect. So just to confirm - you're calling about [landlord_property_address], regarding [landlord_inquiry_category]. [Action summary based on landlord_action_needed]. Is that all correct?\"\nENDIF\n\nWAIT for confirmation\n\nContact Details Collection:\n\n[STATE CHECK: caller_phone]\nIF caller_phone_collected = true AND caller_phone_confirmed = true:\n    you are to say: \"And I have your number as [caller_phone] - is that still the best number?\"\n    WAIT for confirmation\nELSE:\n    you are to say: \"What's the best number to reach you on?\"\n    WAIT for response\n    EXTRACT caller_phone from response\n    SET caller_phone_collected = true\n    you are to say: \"Perfect, so that's [caller_phone] - is that right?\"\n    WAIT for confirmation\n    SET caller_phone_confirmed = true\nENDIF\n\nROUTING:\n\nIF landlord_urgency = true:\n    you are to say: \"I've marked this as urgent. The property management team will call you back within the hour.\"\nELSE:\n    you are to say: \"The property management team will give you a call back this afternoon to discuss this further.\"\nENDIF\n\nCLOSING:\n\nyou are to say: \"Thanks for calling [caller_first_name]. We'll be in touch soon. Bye!\"\n\nSET goodbye_delivered = true\n\nEND R-MODULE: LANDLORD_INQUIRY",
  
  "usage_instructions": {
    "trigger": "Execute when caller_type = 'landlord'",
    "prerequisites": [
      "Team availability statement already delivered",
      "caller_type variable set to 'landlord'",
      "Landlord detection patterns matched"
    ],
    "execution_flow": [
      "Opening statement (name-aware)",
      "Property address collection (state-first)",
      "Inquiry category identification (with flag analysis)",
      "Conditional tenant name collection (only if tenant-specific)",
      "Inquiry details gathering",
      "Action needed determination (category-based routing)",
      "Timeline assessment (action-dependent)",
      "Urgency assessment (automatic from conversation)",
      "Confirmation message (tenant-name aware)",
      "Contact details confirmation",
      "Routing message (urgency-aware)",
      "Closing statement"
    ],
    "state_management": "All steps use state-first checking - skip if _collected AND _confirmed both true",
    "dual_flag_compliance": "100% - all variables have _collected and _confirmed flags",
    "special_logic": "Tenant name only collected if inquiry_category is tenant_issue, rent, or lease"
  },
  
  "integration_notes": {
    "load_method": "LOAD landlord_inquiry_module FROM MCP: priya_r_module_landlord_inquiry.json",
    "execute_method": "EXECUTE: landlord_inquiry_module.content",
    "v4_baseline_reference": "Lines 2329-2333 in PRIYA_WORKING_v4_0_MCP.txt",
    "replaces": "Placeholder at line 2330: EXECUTE: MCP.secondary_call_types.LANDLORD_INQUIRY"
  }
}
